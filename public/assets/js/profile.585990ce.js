"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[845],{4496:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-header",{attrs:{title:e.title}},[a("div",{staticClass:"level-item buttons"},[a("b-button",{attrs:{loading:e.isLoadingDelete,type:"is-light has-text-danger","icon-pack":"fas","icon-right":"user-slash"},on:{click:e.deleteAccount}},[e._v(" "+e._s(e.$t("delete_account"))+" ")]),a("b-button",{attrs:{type:"is-primary","icon-pack":"fas","icon-right":"key"},on:{click:e.changePassword}},[e._v(" "+e._s(e.$t("change_password"))+" ")])],1)]),a("section",{staticClass:"section"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column is-one-quarter has-text-centered"},[e.profile?a("div",{staticClass:"px-5"},[a("div",{staticClass:"photo-border",on:{click:function(t){return e.openCropperModal()}}},[a("img",{attrs:{src:s(4041),width:"200",height:"200",alt:"profile"}})]),e.isUpLoading?a("div",[a("b-icon",{staticClass:"mr-2",attrs:{pack:"fas",icon:"sync-alt","custom-class":"fa-spin"}}),e._v(" uploading... ")],1):e._e()]):e._e()]),a("div",{staticClass:"column"},[a("b-field",{staticClass:"required",attrs:{label:e.$t("full_name"),type:e.form.hasError("name"),message:e.form.errorMessage("name")}},[a("b-input",{attrs:{size:"is-large",name:"name",placeholder:e.$t("full_name")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("b-field",{attrs:{label:e.$t("email_address")}},[e.profile?a("b-input",{attrs:{disabled:"",icon:"at",name:"email",placeholder:"Email"},model:{value:e.profile.email,callback:function(t){e.$set(e.profile,"email",t)},expression:"profile.email"}}):e._e()],1),a("b-field",{attrs:{label:e.$t("telephone_number"),type:e.form.hasError("phone"),message:e.form.errorMessage("phone")}},[a("b-input",{attrs:{icon:"phone",name:"phone",placeholder:e.$t("telephone_number")},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("b-field",{attrs:{label:e.$t("full_address"),type:e.form.hasError("address"),message:e.form.errorMessage("address")}},[a("b-input",{attrs:{icon:"map",name:"address",placeholder:e.$t("full_address")},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("b-field",{attrs:{label:e.$t("write_something_about_yourself"),type:e.form.hasError("notes"),message:e.form.errorMessage("notes")}},[a("b-input",{attrs:{type:"textarea",maxlength:"1000",name:"notes",placeholder:e.$t("write_something_about_yourself")},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}})],1),a("hr"),a("modal-button-save",{on:{click:function(t){return e.submit()}}})],1)])])],1)},r=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{on:{input:function(t){return e.form.clearField(t)}}},[s("div",{staticClass:"modal-card",staticStyle:{width:"420px"}},[s("header",{staticClass:"modal-card-head"},[s("b-icon",{attrs:{pack:"fas",icon:"key"}}),s("p",{staticClass:"modal-card-title ml-10"},[e._v(e._s(e.title))])],1),s("section",{staticClass:"modal-card-body"},[s("b-field",{staticClass:"required",attrs:{label:e.$t("current_password"),type:e.form.hasError("current_password"),message:e.form.errorMessage("current_password")}},[s("b-input",{attrs:{name:"current_password",type:"password",placeholder:e.$t("current_password"),"password-reveal":""},model:{value:e.form.current_password,callback:function(t){e.$set(e.form,"current_password",t)},expression:"form.current_password"}})],1),s("b-field",{staticClass:"required",attrs:{label:e.$t("new_password"),type:e.form.hasError("password"),message:e.form.errorMessage("password")}},[s("b-input",{attrs:{name:"password",type:"password",placeholder:e.$t("new_password"),"password-reveal":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("b-field",{staticClass:"required",attrs:{label:e.$t("confirm_new_password"),type:e.form.hasError("password_confirmation"),message:e.form.errorMessage("password_confirmation")}},[s("b-input",{attrs:{name:"password_confirmation",type:"password",placeholder:e.$t("confirm_new_password"),"password-reveal":""},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}})],1)],1),s("footer",{staticClass:"modal-card-foot"},[s("div",[s("button",{staticClass:"button",attrs:{type:"button"},on:{click:e.$parent.close}},[e._v(e._s(e.$t("cancel")))]),s("modal-button-save",{on:{click:function(t){return e.submit()}}})],1)])])])},n=[],i={name:"UserPasswordForm",data(){const e={current_password:null,password:null,password_confirmation:null},t=new this.$form(e);return t.onSuccessCallback=()=>{this.$emit("data-saved"),this.$parent.close()},{form:t}},computed:{title(){return this.$t("password_change")}},methods:{submit(){this.form.put("/pass").then((()=>{this.$notify("Promjenjena je korisnička lozinka","is-success")})).catch((()=>{}))}}},l=i,c=s(1001),d=(0,c.Z)(l,o,n,!1,null,null,null),m=d.exports,p={data(){let e={name:"",phone:"",address:"",notes:""};return{profile:null,form:new this.$form(e),isLoadingDelete:!1,isUpLoading:!1}},computed:{title(){return this.$t("profile")}},created(){this.reloadData()},methods:{reloadData(){this.$api.profile.get().then((e=>{this.form.name=e.name,this.form.phone=e.phone,this.form.address=e.address,this.form.notes=e.notes,this.profile=e})).catch((e=>{throw this.$alertError(e.message),e})).finally((()=>{}))},submit(){this.form.put("/profile").then((()=>{this.$notify("Promjenili ste podatke","is-success"),this.$store.dispatch("auth/me").then((()=>{console.log("all good")})).catch((e=>this.$alertError(e)))})).catch((()=>{}))},deleteAccount(){const e=()=>{this.isLoadingDelete=!0,this.$api.profile.delete().then((()=>{this.$buefy.toast.open({duration:3e3,message:"Nalog je izbrisan",type:"is-danger",queue:!1});const e=()=>{setTimeout((function(){window.location="/"}),2e3)};e()})).catch((e=>{this.$alertError(e.message)})).finally((()=>{this.isLoadingDelete=!1}))};this.$buefy.dialog.confirm({title:this.$t("delete_account"),message:this.$t("delete_account_confirmation_statement"),confirmText:this.$t("yes_delete_account"),cancelText:this.$t("cancel"),type:"is-danger",hasIcon:!0,onConfirm:()=>e()})},changePassword(){this.$buefy.modal.open({parent:this,component:m,hasModalCard:!0})},openCropperModal(){},fileSelected(e){console.log(e)},deleteImage(){}}},f=p,u=(0,c.Z)(f,a,r,!1,null,"1d27ebeb",null),h=u.exports}}]);